#include <avr/pgmspace.h>

/* エアコン */
//PROGMEM prog_uint16_t data[] = {44,42,44,43,42,45,44,42,44,42,44,2524,349,173,44,129,44,43,44,42,44,42,44,130,44,43,44,42,42,44,44,42,44,129,44,42,42,132,44,129,43,44,43,130,44,129,44,129,44,130,44,129,42,45,44,43,44,129,42,45,44,42,44,42,44,42,44,42,44,42,44,42,44,42,44,43,43,42,42,132,45,42,44,42,44,42,44,42,44,42,44,42,44,43,44,42,44,43,44,42,44,42,44,42,42,44,44,42,44,43,44,43,44,42,44,42,44,42,44,42,44,42,44,43,44,42,44,42,44,42,44,42,44,42,44,42,44,42,44,42,44,43,44,42,44,42,44,42,44,42,44,42,44,43,44,43,43,43,44,42,45,42,44,42,44,42,44,42,44,42,44,43,41,44,44,43,41,45,44,42,44,42,44,42,44,42,44,42,44,42,44,43,44,42,44,43,44,42,44,42,44,42,44,42,44,42,44,42,44,42,47,51,50,51,50,51,89,43,44,42,44,42,49,51,50,51,50,51,87,42,44,42,44,44,50,51,50,51,50,92,42,44,44,43,43,47,50,51,50,51,50,90,44,42,44,42,44,49,50,51,50,51,94,43,44,42,45,42,44,51,50,51,50,51,92,42,44,42,44,42,46,51,50,51,50,51,90,43,41,45,44,43,48,51,50,51,50,95,44,42,44,43,43,129,44,129,44,43,43,42,44,130,42,45,44,42,42,45,44,3482,348,173,44,129,44,43,43,43,44,42,44,129,44,43,43,42,44,42,44,42,44,129,44,42,44,129,44,129,44,43,43,130,44,130,44,129,44,129,44,129,44,43,43,42,44,130,44,43,43,43,44,42,42,45,44,42,44,42,44,42,44,42,44,43,44,42,44,43,43,43,45,42,44,42,44,42,44,42,44,43,43,43,44,129,44,43,44,42,44,130,44,42,44,42,44,129,42,45,44,42,44,42,44,42,44,129,44,130,44,129,44,42,44,42,44,42,42,45,44,42,44,43,44,42,44,42,44,42,42,44,44,42,44,43,43,43,42,44,44,129,44,129,44,130,44,42,44,42,44,43,44,42,44,43,44,42,44,42,44,43,44,42,44,42,44,42,44,42,44,42,44,42,44,42,44,42,44,42,44,43,44,129,44,130,44,42,44,42,44,42,44,43,44,43,43,42,44,42,44,42,44,42,44,42,44,129,44,130,44,42,44,42,44,42,44,42,44,42,44,42,44,43,44,42,44,42,42,44,44,42,44,42,44,43,41,44,42,45,44,42,44,42,44,130,42,45,44,43,44,42,44,42,42,45,43,130,42,132,42,44,44,43,41,45,44,43,44,129,44,42,44,42,44,130,42,44,44,42,44,42,44,42,44,42,44,42,44,42,44,42,44,42,44,130,44,42,44,130,44,129,44,129,42,45,44,129,44};

/* 部屋のライト*/
PROGMEM prog_int32_t data[] = {45,111258,901,450,56,166,56,166,59,164,56,56,58,164,57,55,56,55,59,53,56,166,59,53,59,52,59,164,60,164,59,53,56,56,56,166,57,55,56,166,59,52,57,55,57,55,59,164,59,53,57,166,56,166,59,53,59,164,56,166,59,164,56,55,60,163,56,56,56,3986,901,224,57};

unsigned long us = micros();

void setup() {
  Serial.begin(57600);
  pinMode(11, 1);
  tone(11, 38000);
}

void sendSignal() {
  int dataSize = sizeof(data) / sizeof(*data);
  for (int cnt = 0; cnt < dataSize; cnt++) {
    unsigned long len = pgm_read_word(&data[cnt]) * 10;
    unsigned long us = micros();
    pinMode(11, 1 - (cnt & 1));
    while (long(us + len - micros()) > 0);
  }
}

void loop() {
  if (Serial.read() == '1'){
      sendSignal();
      delay(1000);
  }
}
